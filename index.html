<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>云计算平台部署文档</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            max-width: 1000px;
            margin: 0 auto;
        }
        h1, h2, h3 {
            color: #2c3e50;
            border-bottom: 1px solid #eee;
            padding-bottom: 8px;
        }
        .info {
            margin-bottom: 30px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 5px;
        }
        .code-block {
            background-color: #f4f4f4;
            border-radius: 4px;
            padding: 15px;
            margin: 10px 0;
            font-family: "Courier New", Courier, monospace;
            overflow-x: auto;
        }
        ul, ol {
            margin-left: 20px;
            margin-bottom: 15px;
        }
        .section {
            margin-bottom: 30px;
        }
        .note {
            color: #3498db;
            font-style: italic;
        }
    </style>
</head>
<body>
    <h1>云计算平台部署文档</h1>
    
    <div class="info">
        <p><strong>姓名：</strong>李立强</p>
        <p><strong>学号：</strong>23281300</p>
    </div>

    <div class="section">
        <h2>一、大数据平台安装</h2>
        
        <h3>1. Linux虚拟机安装</h3>
        <ul>
            <li><strong>发行商选择</strong>：安装Ubuntu-24.03系统，部署三台虚拟机，命名为master、slave1、slave2。</li>
            <li><strong>网络配置</strong>：设置固定IP地址，确保节点间通信：
                <ul>
                    <li>master：192.168.226.132</li>
                    <li>slave1：192.168.226.133</li>
                    <li>slave2：192.168.226.134</li>
                </ul>
            </li>
            <li><strong>SSH免密配置</strong>：
                <ul>
                    <li>在master节点生成密钥对：</li>
                </ul>
                <div class="code-block">
                    ssh-keygen -t rsa -P "" -f ~/.ssh/id_rsa
                </div>
                <ul>
                    <li>分发公钥到所有节点：</li>
                </ul>
                <div class="code-block">
                    ssh-copy-id master<br>
                    ssh-copy-id slave1<br>
                    ssh-copy-id slave2
                </div>
                <ul>
                    <li>验证免密登录：<code>ssh slave1</code> 测试连接是否成功。</li>
                </ul>
            </li>
        </ul>

        <h3>2. Hadoop组件安装</h3>
        <ul>
            <li><strong>组件下载</strong>：通过阿里云镜像站获取Hadoop-3.3.6版本压缩包，提升下载速度。</li>
            <li><strong>解压配置</strong>：
                <ul>
                    <li>传输压缩包到虚拟机共享文件夹，执行解压命令：</li>
                </ul>
                <div class="code-block">
                    tar -xzvf hadoop-3.3.6.tar.gz
                </div>
                <ul>
                    <li>移动到统一目录：</li>
                </ul>
                <div class="code-block">
                    sudo mv hadoop-3.3.6 /usr/local/hadoop
                </div>
            </li>
            <li><strong>JDK环境依赖</strong>：三台虚拟机均需安装JDK，验证命令：<code>java --version</code>，确保版本为1.8及以上。</li>
        </ul>
    </div>

    <div class="section">
        <h2>二、平台配置</h2>
        
        <h3>1. 环境变量配置</h3>
        <ul>
            <li>编辑配置文件：</li>
        </ul>
        <div class="code-block">
            vim ~/.bashrc
        </div>
        <ul>
            <li>添加环境变量内容：</li>
        </ul>
        <div class="code-block">
            export HADOOP_HOME=/usr/local/hadoop<br>
            export PATH=$PATH:$HADOOP_HOME/bin<br>
            export PATH=$PATH:$HADOOP_HOME/sbin<br>
            export JAVA_HOME=/usr/lib/jvm/default-java
        </div>
        <ul>
            <li>使配置生效：</li>
        </ul>
        <div class="code-block">
            source ~/.bashrc
        </div>

        <h3>2. 核心配置文件修改</h3>
        <ul>
            <li><strong>core-site.xml</strong>（配置HDFS主节点地址）：</li>
        </ul>
        <div class="code-block">
            &lt;configuration&gt;<br>
            &nbsp;&nbsp;&lt;property&gt;<br>
            &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;fs.defaultFS&lt;/name&gt;<br>
            &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;hdfs://master:9000&lt;/value&gt;<br>
            &nbsp;&nbsp;&lt;/property&gt;<br>
            &lt;/configuration&gt;
        </div>

        <ul>
            <li><strong>hdfs-site.xml</strong>（设置副本数量和存储路径）：</li>
        </ul>
        <div class="code-block">
            &lt;configuration&gt;<br>
            &nbsp;&nbsp;&lt;property&gt;<br>
            &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.replication&lt;/name&gt;<br>
            &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;2&lt;/value&gt;<br>
            &nbsp;&nbsp;&lt;/property&gt;<br>
            &nbsp;&nbsp;&lt;property&gt;<br>
            &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;<br>
            &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;/usr/local/hadoop/data/nameNode&lt;/value&gt;<br>
            &nbsp;&nbsp;&lt;/property&gt;<br>
            &nbsp;&nbsp;&lt;property&gt;<br>
            &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;<br>
            &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;/usr/local/hadoop/data/dataNode&lt;/value&gt;<br>
            &nbsp;&nbsp;&lt;/property&gt;<br>
            &lt;/configuration&gt;
        </div>

        <ul>
            <li><strong>yarn-site.xml</strong>（配置资源管理器）：</li>
        </ul>
        <div class="code-block">
            &lt;configuration&gt;<br>
            &nbsp;&nbsp;&lt;property&gt;<br>
            &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.resourcemanager.address&lt;/name&gt;<br>
            &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;master:8032&lt;/value&gt;<br>
            &nbsp;&nbsp;&lt;/property&gt;<br>
            &nbsp;&nbsp;&lt;property&gt;<br>
            &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;<br>
            &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;mapreduce_shuffle&lt;/value&gt;<br>
            &nbsp;&nbsp;&lt;/property&gt;<br>
            &lt;/configuration&gt;
        </div>

        <ul>
            <li><strong>mapred-site.xml</strong>（指定MapReduce框架）：</li>
        </ul>
        <div class="code-block">
            &lt;configuration&gt;<br>
            &nbsp;&nbsp;&lt;property&gt;<br>
            &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;mapreduce.framework.name&lt;/name&gt;<br>
            &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;yarn&lt;/value&gt;<br>
            &nbsp;&nbsp;&lt;/property&gt;<br>
            &lt;/configuration&gt;
        </div>

        <ul>
            <li><strong>分发配置文件</strong>：将master节点配置同步到从节点：</li>
        </ul>
        <div class="code-block">
            scp -r /usr/local/hadoop/etc/hadoop slave1:/usr/local/hadoop/etc/<br>
            scp -r /usr/local/hadoop/etc/hadoop slave2:/usr/local/hadoop/etc/
        </div>
    </div>

    <div class="section">
        <h2>三、启动测试</h2>
        <ol>
            <li>
                <strong>格式化HDFS</strong>：首次启动前执行初始化：
                <div class="code-block">
                    hdfs namenode -format
                </div>
            </li>
            <li>
                <strong>启动集群服务</strong>：
                <ul>
                    <li>启动HDFS：<code>start-dfs.sh</code></li>
                    <li>启动YARN：<code>start-yarn.sh</code></li>
                </ul>
            </li>
            <li>
                <strong>验证服务状态</strong>：
                <ul>
                    <li>查看进程：<code>jps</code>，确保NameNode、DataNode、ResourceManager等进程正常运行。</li>
                    <li>网页访问：打开浏览器访问 <code>http://master:9870</code>，查看HDFS管理界面。</li>
                </ul>
            </li>
        </ol>
    </div>

    <div class="section">
        <h2>四、HBase部署</h2>
        
        <h3>1. 安装准备</h3>
        <ul>
            <li><strong>下载解压</strong>：从阿里云镜像站下载HBase-2.5.7版本，执行解压命令：
                <div class="code-block">
                    tar -zxvf hbase-2.5.7-bin.tar.gz
                </div>
                移动到统一目录：
                <div class="code-block">
                    sudo mv hbase-2.5.7 /usr/local/hbase
                </div>
            </li>
            <li><strong>环境变量配置</strong>：
                <ul>
                    <li>编辑 <code>~/.bashrc</code> 文件，添加：</li>
                </ul>
                <div class="code-block">
                    export HBASE_HOME=/usr/local/hbase<br>
                    export PATH=$PATH:$HBASE_HOME/bin
                </div>
                <ul>
                    <li>使配置生效：</li>
                </ul>
                <div class="code-block">
                    source ~/.bashrc
                </div>
            </li>
        </ul>

        <h3>2. 配置文件设置</h3>
        <ul>
            <li><strong>hbase-env.sh</strong>（配置JDK路径及HBase自管理ZooKeeper）：
                <ul>
                    <li>编辑文件：<code>vim /usr/local/hbase/conf/hbase-env.sh</code>，添加：</li>
                </ul>
                <div class="code-block">
                    export JAVA_HOME=/usr/lib/jvm/default-java<br>
                    export HBASE_MANAGES_ZK=true  # 启用HBase内置ZooKeeper
                </div>
            </li>
            <li><strong>hbase-site.xml</strong>（配置HBase核心参数）：
                <ul>
                    <li>编辑文件：<code>vim /usr/local/hbase/conf/hbase-site.xml</code>，添加：</li>
                </ul>
                <div class="code-block">
                    &lt;configuration&gt;<br>
                    &nbsp;&nbsp;&lt;!-- 指定HBase在HDFS中的存储路径 --&gt;<br>
                    &nbsp;&nbsp;&lt;property&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;hbase.rootdir&lt;/name&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;hdfs://master:9000/hbase&lt;/value&gt;<br>
                    &nbsp;&nbsp;&lt;/property&gt;<br>
                    &nbsp;&nbsp;&lt;!-- 启用分布式模式 --&gt;<br>
                    &nbsp;&nbsp;&lt;property&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;hbase.cluster.distributed&lt;/name&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;true&lt;/value&gt;<br>
                    &nbsp;&nbsp;&lt;/property&gt;<br>
                    &nbsp;&nbsp;&lt;!-- 指定内置ZooKeeper节点 --&gt;<br>
                    &nbsp;&nbsp;&lt;property&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;hbase.zookeeper.quorum&lt;/name&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;master,slave1,slave2&lt;/value&gt;<br>
                    &nbsp;&nbsp;&lt;/property&gt;<br>
                    &nbsp;&nbsp;&lt;!-- ZooKeeper数据存储路径 --&gt;<br>
                    &nbsp;&nbsp;&lt;property&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;hbase.zookeeper.property.dataDir&lt;/name&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;/usr/local/hbase/zookeeper-data&lt;/value&gt;<br>
                    &nbsp;&nbsp;&lt;/property&gt;<br>
                    &lt;/configuration&gt;
                </div>
            </li>
            <li><strong>regionservers</strong>（指定RegionServer节点）：
                <ul>
                    <li>编辑文件：<code>vim /usr/local/hbase/conf/regionservers</code>，添加从节点：</li>
                </ul>
                <div class="code-block">
                    slave1<br>
                    slave2
                </div>
            </li>
            <li><strong>分发配置文件</strong>：将master节点的HBase配置同步到从节点：
                <div class="code-block">
                    scp -r /usr/local/hbase/conf slave1:/usr/local/hbase/<br>
                    scp -r /usr/local/hbase/conf slave2:/usr/local/hbase/
                </div>
            </li>
        </ul>

        <h3>3. 启动与验证</h3>
        <ul>
            <li><strong>启动HBase</strong>：在master节点执行：
                <div class="code-block">
                    start-hbase.sh
                </div>
            </li>
            <li><strong>查看进程</strong>：
                <ul>
                    <li>master节点执行 <code>jps</code>，应包含 <code>HMaster</code> 进程。</li>
                    <li>从节点执行 <code>jps</code>，应包含 <code>HRegionServer</code> 进程。</li>
                </ul>
            </li>
            <li><strong>网页验证</strong>：打开浏览器访问 <code>http://master:16010</code>，查看HBase管理界面，确认集群状态正常。</li>
            <li><strong>命令行验证</strong>：执行 <code>hbase shell</code> 进入交互模式，输入 <code>status</code> 查看集群状态，返回节点信息即部署成功。</li>
        </ul>
    </div>
</body>
</html>
